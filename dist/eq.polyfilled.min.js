/*! eq.js (with polyfills) v1.9.1 (c) 2013-2016 Sam Richard with thanks to the Financial Times, MIT license */
!function(){"getPrototypeOf"in Object||(Object.getPrototypeOf=function(e){if(e!==Object(e))throw new TypeError("Object.getPrototypeOf called on non-object");return e.constructor?e.constructor.prototype:null}),"requestAnimationFrame"in this||!function(e){var t;if("mozRequestAnimationFrame"in e?t="moz":"webkitRequestAnimationFrame"in e&&(t="webkit"),t)e.requestAnimationFrame=function(n){return e[t+"RequestAnimationFrame"](function(){n(performance.now())})},e.cancelAnimationFrame=e[t+"CancelAnimationFrame"];else{var n=Date.now();e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),o=16+n-t;return o<0&&(o=0),n=t,setTimeout(function(){n=Date.now(),e(performance.now())},o)},e.cancelAnimationFrame=function(e){clearTimeout(e)}}}(this),function(e){if(!("Event"in e))return!1;if("function"==typeof e.Event)return!0;try{return new Event("click"),!0}catch(e){return!1}}(this)||!function(){function e(e,t){for(var n=-1,o=e.length;++n<o;)if(n in e&&e[n]===t)return n;return-1}var t={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1},n=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(e,t){if(!e)throw new Error("Not enough arguments");if("createEvent"in document){var n=document.createEvent("Event"),o=!(!t||void 0===t.bubbles)&&t.bubbles,r=!(!t||void 0===t.cancelable)&&t.cancelable;return n.initEvent(e,o,r),n}var n=document.createEventObject();return n.type=e,n.bubbles=!(!t||void 0===t.bubbles)&&t.bubbles,n.cancelable=!(!t||void 0===t.cancelable)&&t.cancelable,n},n&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:n}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var n=this,o=arguments[0],r=arguments[1];if(n===window&&o in t)throw new Error("In IE8 the event: "+o+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");n._events||(n._events={}),n._events[o]||(n._events[o]=function(t){var o,r=n._events[t.type].list,i=r.slice(),a=-1,c=i.length;for(t.preventDefault=function(){t.cancelable!==!1&&(t.returnValue=!1)},t.stopPropagation=function(){t.cancelBubble=!0},t.stopImmediatePropagation=function(){t.cancelBubble=!0,t.cancelImmediate=!0},t.currentTarget=n,t.relatedTarget=t.fromElement||null,t.target=t.target||t.srcElement||n,t.timeStamp=(new Date).getTime(),t.clientX&&(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop);++a<c&&!t.cancelImmediate;)a in i&&(o=i[a],e(r,o)!==-1&&"function"==typeof o&&o.call(n,t))},n._events[o].list=[],n.attachEvent&&n.attachEvent("on"+o,n._events[o])),n._events[o].list.push(r)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var t,n=this,o=arguments[0],r=arguments[1];n._events&&n._events[o]&&n._events[o].list&&(t=e(n._events[o].list,r),t!==-1&&(n._events[o].list.splice(t,1),n._events[o].list.length||(n.detachEvent&&n.detachEvent("on"+o,n._events[o]),delete n._events[o])))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(e){if(!arguments.length)throw new Error("Not enough arguments");if(!e||"string"!=typeof e.type)throw new Error("DOM Events Exception 0");var t=this,n=e.type;try{if(!e.bubbles){e.cancelBubble=!0;var o=function(e){e.cancelBubble=!0,(t||window).detachEvent("on"+n,o)};this.attachEvent("on"+n,o)}this.fireEvent("on"+n,e)}catch(o){e.target=t;do e.currentTarget=t,"_events"in t&&"function"==typeof t._events[n]&&t._events[n].call(t,e),"function"==typeof t["on"+n]&&t["on"+n].call(t,e),t=9===t.nodeType?t.parentWindow:t.parentNode;while(t&&!e.cancelBubble)}return!0})}(),"CustomEvent"in this&&("function"==typeof this.CustomEvent||this.CustomEvent.toString().indexOf("CustomEventConstructor")>-1)||(this.CustomEvent=function(e,t){if(!e)throw Error('TypeError: Failed to construct "CustomEvent": An event name must be provided.');var n;if(t=t||{bubbles:!1,cancelable:!1,detail:null},"createEvent"in document)try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(o){n=document.createEvent("Event"),n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail}else n=new Event(e,t),n.detail=t&&t.detail||null;return n},CustomEvent.prototype=Event.prototype),"addEventListener"in this||document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}),"getComputedStyle"in this||!function(e){function t(e,n,o){var r,i=e.document&&e.currentStyle[n].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],a=i[1],c=i[2];return o=o?/%|em/.test(c)&&e.parentElement?t(e.parentElement,"fontSize",null):16:o,r="fontSize"==n?o:/width/i.test(n)?e.clientWidth:e.clientHeight,"%"==c?a/100*r:"cm"==c?.3937*a*96:"em"==c?a*o:"in"==c?96*a:"mm"==c?.3937*a*96/10:"pc"==c?12*a*96/72:"pt"==c?96*a/72:a}function n(e,t){var n="border"==t?"Width":"",o=t+"Top"+n,r=t+"Right"+n,i=t+"Bottom"+n,a=t+"Left"+n;e[t]=(e[o]==e[r]&&e[o]==e[i]&&e[o]==e[a]?[e[o]]:e[o]==e[i]&&e[a]==e[r]?[e[o],e[r]]:e[a]==e[r]?[e[o],e[r],e[i]]:[e[o],e[r],e[i],e[a]]).join(" ")}function o(e){var o,r=this,i=e.currentStyle,a=t(e,"fontSize"),c=function(e){return"-"+e.toLowerCase()};for(o in i)if(Array.prototype.push.call(r,"styleFloat"==o?"float":o.replace(/[A-Z]/,c)),"width"==o)r[o]=e.offsetWidth+"px";else if("height"==o)r[o]=e.offsetHeight+"px";else if("styleFloat"==o)r.float=i[o];else if(/margin.|padding.|border.+W/.test(o)&&"auto"!=r[o])r[o]=Math.round(t(e,o,a))+"px";else if(/^outline/.test(o))try{r[o]=i[o]}catch(e){r.outlineColor=i.color,r.outlineStyle=r.outlineStyle||"none",r.outlineWidth=r.outlineWidth||"0px",r.outline=[r.outlineColor,r.outlineWidth,r.outlineStyle].join(" ")}else r[o]=i[o];n(r,"margin"),n(r,"padding"),n(r,"border"),r.fontSize=Math.round(a)+"px"}o.prototype={constructor:o,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(e){return this[e.replace(/-\w/g,function(e){return e[1].toUpperCase()})]},item:function(e){return this[e]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}},e.getComputedStyle=function(e){return new o(e)}}(this),"forEach"in Array.prototype||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError(this+"is not an object");if(!(e instanceof Function))throw new TypeError(e+" is not a function");for(var t=Object(this),n=arguments[1],o=t instanceof String?t.split(""):t,r=Math.max(Math.min(o.length,9007199254740991),0)||0,i=-1;++i<r;)i in o&&e.call(n,o[i],i,t)})}(),function(e){"use strict";var t,n=function(){this.nodes=[],this.eqsLength=0,this.widths=[],this.points=[],this.callback=void 0},o=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){return n.call(e,window.event)})},r=function(e){return window.getComputedStyle(e,":before").getPropertyValue("content").slice(1,-1)},i=function(e,t){return[].slice.call(e).concat([].slice.call(t))};n.prototype.query=function(e,n){var o,i,a,c,u,l,s=e,p=Object.getPrototypeOf(t);for(n&&"function"==typeof n&&(p.callback=n),s&&"number"!=typeof s?o=s.length:(s=p.nodes,o=p.nodesLength),i=[],a=[],l=0;l<o;l++){c=s[l].getBoundingClientRect(),u=c.width,void 0===u&&(u=c.right-c.left),i.push(u);try{a.push(p.sortObj(s[l].getAttribute("data-eq-pts")))}catch(e){try{a.push(p.sortObj(r(s[l])))}catch(e){a.push([{key:"",value:0}])}}}p.widths=i,p.points=a,s&&"number"!=typeof s?p.nodeWrites(s,i,a):n&&"function"!=typeof n?p.nodeWrites():window.requestAnimationFrame(p.nodeWrites)},n.prototype.nodeWrites=function(e){var n,o,r,i,a,c,u,l,s,p,d,f,v,m,h=e,y=Object.getPrototypeOf(t),b=y.widths,w=y.points;for(h&&"number"!=typeof h?i=h.length:(h=y.nodes,i=y.nodesLength),n=0;n<i;n++){if(l=b[n],s=h[n],p=w[n],d=[],f=p.length,l<p[0].value)u=null;else if(l>=p[f-1].value){for(r=0;r<f;r++)d.push(p[r].key);u=d.join(" ")}else for(o=0;o<f;o++){if(v=p[o],m=p[o+1],d.push(v.key),0===o&&l<v.value){u=null;break}if(void 0!==m&&void 0===m.value){d.push(m.key),u=d.join(" ");break}if(l>=v.value&&l<m.value){u=d.join(" ");break}}null===u?s.removeAttribute("data-eq-state"):s.setAttribute("data-eq-state",u),c=new CustomEvent("eqResize",{detail:u,bubbles:!0}),s.dispatchEvent(c)}y.callback&&(a=y.callback,y.callback=void 0,a(h))},n.prototype.refreshNodes=function(){var e=Object.getPrototypeOf(t),n=[];e.nodes=document.querySelectorAll("[data-eq-pts]"),n=r(document.querySelector("html")).split(", "),n.forEach(function(t){""!==t&&(e.nodes=i(e.nodes,document.querySelectorAll(t)))}),e.nodesLength=e.nodes.length},n.prototype.sortObj=function(e){var t,n,o=[],r=e.split(",");for(t=0;t<r.length;t++)n=r[t].split(":"),o.push({key:n[0].replace(/^\s+|\s+$/g,""),value:parseFloat(n[1])});return o.sort(function(e,t){return e.value-t.value})},n.prototype.definePts=function(e,t){var n=t||{};return n=JSON.stringify(n),n=n.substring(1,n.length-1),n=n.replace(/:/g,": "),n=n.replace(/,/g,", "),n=n.replace(/"/g,""),e.setAttribute("data-eq-pts",n),n},n.prototype.all=function(e){var n=Object.getPrototypeOf(t),o=e||!1;n.refreshNodes(),o?n.query(void 0,e):window.requestAnimationFrame(n.query)},t=e||new n,o(window,"DOMContentLoaded",function(){t.all(!1)}),o(window,"load",function(){t.all(!0)}),o(window,"resize",function(){t.all(!0)}),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("eqjs",function(){return t}):window.eqjs=t}(window.eqjs);
//# sourceMappingURL=eq.polyfilled.min.js.map
